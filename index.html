<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>For Palak ‚ù§Ô∏è</title>

  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Playfair+Display:wght@400;600&family=Poppins:wght@400;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --pink:#ff4b84;
      --deep:#b3003b;
      --bgOverlay: rgba(255, 235, 245, 0.86);
      --card: rgba(255,255,255,0.92);
      --shadow: 0 18px 40px rgba(0,0,0,0.18);
      --radius: 26px;
    }

    *{ box-sizing:border-box; }

    body{
      margin:0;
      font-family:'Poppins',sans-serif;
      overflow-x:hidden;
      background:#000;
    }

    /* Background */
    .bg{
      position:fixed; inset:0;
      background:#000;
      z-index:-3;
    }
    .bg::after{
      content:"";
      position:absolute; inset:0;
      background:linear-gradient(135deg, var(--bgOverlay), rgba(255,255,255,0.45));
      backdrop-filter: blur(7px);
    }

    /* Floating cute blobs */
    .blob{
      position:fixed;
      width:220px; height:220px;
      border-radius:50%;
      filter: blur(20px);
      opacity:0.55;
      z-index:-2;
      animation: blob 8s ease-in-out infinite;
      pointer-events:none;
    }
    .b1{ left:-60px; top:40px; background:#ff7bb0; }
    .b2{ right:-70px; top:180px; background:#ffd1e1; animation-delay:1.2s; }
    .b3{ left:20px; bottom:-80px; background:#ffc2d6; animation-delay:2.2s; }
    @keyframes blob{
      0%,100%{ transform:translate(0,0) scale(1); }
      50%{ transform:translate(30px,-20px) scale(1.08); }
    }

    /* Falling hearts */
    .heart{
      position:fixed; top:-22px;
      font-size:18px;
      opacity:.9;
      animation: fall linear forwards;
      z-index:-1;
      pointer-events:none;
      filter: drop-shadow(0 6px 10px rgba(0,0,0,.15));
    }
    @keyframes fall{
      to{ transform:translateY(112vh) rotate(180deg); opacity:0; }
    }

    /* Confetti */
    .confetti{
      position:fixed; top:-20px;
      width:10px; height:14px;
      border-radius:2px;
      z-index:50;
      pointer-events:none;
      animation: confFall linear forwards;
    }
    @keyframes confFall{
      to{ transform:translateY(112vh) rotate(720deg); opacity:0; }
    }

    .wrap{
      min-height:100vh;
      padding:22px 14px 90px;
      text-align:center;
    }

    h1,h2{
      font-family:'Great Vibes',cursive;
      color:var(--deep);
      margin:12px 0;
      text-shadow: 0 10px 30px rgba(0,0,0,0.12);
    }

    .sub{
      font-family:'Playfair Display',serif;
      color:#4b1c2b;
      max-width:640px;
      margin:0 auto 14px;
      font-size:18px;
      line-height:1.5;
    }

    .card{
      max-width:560px;
      margin:18px auto;
      background:var(--card);
      border-radius:var(--radius);
      padding:22px 18px;
      box-shadow: var(--shadow);
      animation: in 0.7s ease both;
    }
    @keyframes in{
      from{ opacity:0; transform:translateY(16px) scale(.985);}
      to{ opacity:1; transform:translateY(0) scale(1);}
    }
    .hidden{ display:none; }

    /* Buttons */
    .btn{
      background:var(--pink);
      color:#fff;
      border:none;
      border-radius:999px;
      padding:12px 22px;
      margin:10px 8px 0;
      font-size:16px;
      cursor:pointer;
      box-shadow:0 12px 22px rgba(255,75,132,0.28);
      transition:.18s transform, .18s filter;
      user-select:none;
    }
    .btn:hover{ transform:translateY(-2px); filter:brightness(.98); }
    .btn:active{ transform:translateY(1px); }

    .btnOutline{
      background:rgba(255,75,132,0.12);
      color:var(--deep);
      border:1px solid rgba(179,0,59,0.25);
      box-shadow:none;
    }

    /* Collage */
    .collage{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:10px;
      margin-top:12px;
    }
    .collage img{
      width:100%;
      border-radius:18px;
      box-shadow:0 10px 18px rgba(0,0,0,.12);
      transform:scale(1);
      transition: transform .25s ease;
    }
    .collage img:hover{ transform:scale(1.03); }

    /* Slideshow */
    .slideBox{
      border-radius:18px;
      overflow:hidden;
      margin-top:12px;
      box-shadow:0 10px 18px rgba(0,0,0,.12);
      position:relative;
    }
    .slideBox img{
      width:100%;
      display:block;
      transition: opacity .25s ease;
      animation: zoom 6s ease-in-out infinite;
    }
    @keyframes zoom{ 0%,100%{transform:scale(1)} 50%{transform:scale(1.04)} }

    /* Runaway NO arena */
    .arena{
      position:relative;
      height:120px;
      margin-top:8px;
    }
    #no1, #no2{
      position:absolute;
      left:50%; top:10px;
      transform:translateX(-50%);
    }

    /* Gifts */
    .gifts{
      display:flex;
      justify-content:center;
      gap:14px;
      flex-wrap:wrap;
      margin-top:12px;
    }
    .gift{
      width:100px;
      border-radius:20px;
      background:white;
      padding:10px;
      box-shadow:0 14px 24px rgba(0,0,0,.12);
      cursor:pointer;
      transition:.2s transform;
      user-select:none;
    }
    .gift:hover{ transform:translateY(-4px) rotate(-1deg); }
    .gift img{ width:100%; border-radius:14px; display:block; }

    /* Modal */
    .modal{
      position:fixed; inset:0;
      background:rgba(0,0,0,.55);
      display:none;
      align-items:center;
      justify-content:center;
      padding:18px;
      z-index:80;
    }
    .modalCard{
      background:white;
      max-width:600px;
      width:100%;
      border-radius:24px;
      padding:16px;
      text-align:center;
      animation: in .35s ease both;
    }
    .modalCard img{
      width:100%;
      border-radius:18px;
      box-shadow:0 10px 18px rgba(0,0,0,.12);
    }
    .modalText{
      font-family:'Playfair Display',serif;
      margin:10px 6px 6px;
      color:#4b1c2b;
      font-size:18px;
      line-height:1.5;
    }

    /* Loader */
    .loader{
      position:fixed; inset:0;
      background:linear-gradient(135deg,#ffd6e6,#fff);
      display:flex; align-items:center; justify-content:center; flex-direction:column;
      z-index:200;
      text-align:center;
      padding:18px;
    }
    .loader h1{ font-size:56px; margin:0; }
    .progress{
      width:270px;height:10px;border-radius:999px;background:#ffe3ef;margin-top:18px;overflow:hidden;
    }
    .bar{width:0%;height:100%;background:var(--pink);border-radius:999px;transition:width .2s;}
    .small{font-size:14px;opacity:.75;margin-top:10px}

    /* Music button */
    .musicBtn{
      position:fixed; right:14px; bottom:14px;
      background:#ffffffcc;
      border:1px solid #ffd1e0;
      color:#b3003b;
      border-radius:999px;
      padding:10px 14px;
      cursor:pointer;
      box-shadow:0 10px 18px rgba(0,0,0,.12);
      z-index:120;
      font-family:'Poppins',sans-serif;
    }
    .musicBtn strong{ font-weight:600; }
  </style>
</head>

<body>
  <div class="bg" id="bg"></div>
  <div class="blob b1"></div><div class="blob b2"></div><div class="blob b3"></div>

  <!-- Loader -->
  <div class="loader" id="loader">
    <h1>For Palak ‚ù§Ô∏è</h1>
    <div class="sub" style="margin-top:10px;">
      Palak, this is my little way of saying‚Ä¶<br>
      you mean more to me than you think.
    </div>
    <div class="progress"><div class="bar" id="bar"></div></div>
    <div class="small">Loading memories‚Ä¶</div>
  </div>

  <div class="wrap" id="app" style="display:none;">
    <h1>Hey Palak üíó</h1>
    <div class="sub">
      You didn‚Äôt just enter my life‚Ä¶<br>
      you changed the way my heart feels about everything.
    </div>

    <!-- Step 1 -->
    <div class="card" id="step1">
      <h2>I made something for you üå∏</h2>
      <div class="sub">Do you wanna see? ü•∫</div>

      <button class="btn" onclick="go('collage')">Yes üíï</button>
      <div class="arena">
        <button class="btn" id="no1">No üòú</button>
      </div>

      <button class="btn btnOutline" style="margin-top:14px;" onclick="toggleMusic()">
        üé∂ If music isn‚Äôt playing, tap here once
      </button>
    </div>

    <!-- Collage -->
    <div class="card hidden" id="collage">
      <h2>Us, in little moments üíû</h2>
      <div class="sub">Proof that love looks like this‚Ä¶</div>

      <div class="collage">
        <img id="c1" alt="c1">
        <img id="c2" alt="c2">
        <img id="c3" alt="c3">
        <img id="c4" alt="c4">
      </div>

      <button class="btn" onclick="go('slideshow')">Next ‚ú®</button>
    </div>

    <!-- Slideshow -->
    <div class="card hidden" id="slideshow">
      <h2>My favourite memories üí´</h2>
      <div class="sub">
        I don‚Äôt need perfect days‚Ä¶<br>
        I just need days with you.
      </div>

      <div class="slideBox">
        <img id="slider" alt="slideshow">
      </div>

      <button class="btn" onclick="go('question')">Next üíò</button>
    </div>

    <!-- Question -->
    <div class="card hidden" id="question">
      <h2>Okay‚Ä¶ one question ü•∫</h2>
      <div class="sub">
        Palak‚Ä¶ if I could choose one place to be forever,<br>
        it would be right next to you.
      </div>

      <h2>Will you be my Valentine? üåπ</h2>

      <button class="btn" onclick="yesFlow()">Of course üíñ</button>
      <div class="arena">
        <button class="btn" id="no2">No üôà</button>
      </div>
    </div>

    <!-- Gifts -->
    <div class="card hidden" id="gifts">
      <h2>Open your gifts üéÅ</h2>
      <div class="sub">Each one is a little piece of my heart.</div>

      <div class="gifts">
        <div class="gift" onclick="openGift(1)">
          <img src="https://i.imgur.com/7yUvePI.png" alt="gift">
        </div>
        <div class="gift" onclick="openGift(2)">
          <img src="https://i.imgur.com/7yUvePI.png" alt="gift">
        </div>
        <div class="gift" onclick="openGift(3)">
          <img src="https://i.imgur.com/7yUvePI.png" alt="gift">
        </div>
      </div>

      <button class="btn" onclick="go('final')">One last thing‚Ä¶ üíç</button>
    </div>

    <!-- Final -->
    <div class="card hidden" id="final">
      <h1>It‚Äôs You. Always You. üíç</h1>
      <img id="finalImg" style="width:100%;border-radius:18px;box-shadow:0 10px 18px rgba(0,0,0,.12);" alt="final">
      <div class="modalText">
        Palak, I don‚Äôt promise perfection‚Ä¶<br>
        but I promise effort, honesty,<br>
        and a love that chooses you ‚Äî every single day.
      </div>

      <button class="btn" onclick="finalBurst()">üíñ One more surprise</button>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal" id="modal" onclick="closeModal()">
    <div class="modalCard" onclick="event.stopPropagation()">
      <img id="modalImg" src="" alt="">
      <div class="modalText" id="modalText"></div>
      <button class="btn" onclick="closeModal()">Close üíó</button>
    </div>
  </div>

  <!-- Music -->
  <audio id="bgm" preload="auto" loop playsinline>
    <source src="audio/song.mp3" type="audio/mpeg">
  </audio>
  <button class="musicBtn" id="musicBtn" onclick="toggleMusic()">üé∂ <strong>Play music</strong></button>

<script>
  // --------- AUTO-DETECT: images in /images OR root ---------
  const NAMES = {
    bg: "bg.jpg",
    c: ["c1.jpg","c2.jpg","c3.jpg","c4.jpg"],
    s: ["s1.jpg","s2.jpg","s3.jpg","s4.jpg"],
    final: "final.jpg"
  };

  async function exists(path){
    try{
      const r = await fetch(path, { method: "HEAD", cache:"no-store" });
      return r.ok;
    }catch(e){ return false; }
  }

  let IMG_BASE = ""; // "" or "images/"
  (async ()=>{
    if(await exists("images/" + NAMES.bg)) IMG_BASE = "images/";
    else IMG_BASE = ""; // images are in root

    // set background
    const bgEl = document.getElementById("bg");
    bgEl.style.background = `url("${IMG_BASE + NAMES.bg}") center/cover no-repeat`;

    // collage src
    document.getElementById("c1").src = IMG_BASE + NAMES.c[0];
    document.getElementById("c2").src = IMG_BASE + NAMES.c[1];
    document.getElementById("c3").src = IMG_BASE + NAMES.c[2];
    document.getElementById("c4").src = IMG_BASE + NAMES.c[3];

    // slideshow first
    document.getElementById("slider").src = IMG_BASE + NAMES.s[0];

    // final
    document.getElementById("finalImg").src = IMG_BASE + NAMES.final;
  })();

  // --------- LOADER ---------
  let prog = 0;
  const bar = document.getElementById('bar');
  const loader = document.getElementById('loader');
  const app = document.getElementById('app');

  const loadInt = setInterval(()=>{
    prog += 6;
    bar.style.width = prog + "%";
    if(prog >= 100){
      clearInterval(loadInt);
      loader.style.display = "none";
      app.style.display = "block";
      window.scrollTo({top:0, behavior:'smooth'});
    }
  }, 120);

  // --------- HEARTS ---------
  function spawnHeart(){
    const h = document.createElement('div');
    h.className = 'heart';
    h.textContent = Math.random() > 0.5 ? 'üíó' : 'üíñ';
    h.style.left = Math.random()*100 + 'vw';
    h.style.animationDuration = (3 + Math.random()*3) + 's';
    h.style.fontSize = (14 + Math.random()*20) + 'px';
    document.body.appendChild(h);
    setTimeout(()=>h.remove(), 6500);
  }
  setInterval(spawnHeart, 360);

  // --------- CONFETTI ---------
  function confettiBurst(count=120){
    for(let i=0;i<count;i++){
      const c = document.createElement('div');
      c.className='confetti';
      c.style.left = Math.random()*100 + 'vw';
      c.style.background = `hsl(${Math.random()*360}, 90%, 60%)`;
      c.style.animationDuration = (2.2 + Math.random()*2.5) + 's';
      document.body.appendChild(c);
      setTimeout(()=>c.remove(), 5200);
    }
  }

  // --------- NAV ---------
  function go(id){
    document.querySelectorAll('.card').forEach(c=>c.classList.add('hidden'));
    document.getElementById(id).classList.remove('hidden');
    window.scrollTo({top:0, behavior:'smooth'});
  }

  // --------- RUNAWAY NO ---------
  function runaway(btn){
    const move = () => {
      btn.style.left = (10 + Math.random()*80) + "%";
      btn.style.top  = (0 + Math.random()*65) + "%";
      btn.style.transform = "translateX(-50%)";
    };
    btn.addEventListener("mouseenter", move);
    btn.addEventListener("click", move);
    setTimeout(move, 250);
  }
  runaway(document.getElementById("no1"));
  runaway(document.getElementById("no2"));

  // --------- SLIDESHOW ---------
  let si = 0;
  setInterval(()=>{
    const img = document.getElementById("slider");
    if(!img || img.closest(".hidden")) return;

    const slides = NAMES.s.map(x => IMG_BASE + x);
    si = (si + 1) % slides.length;
    img.style.opacity = 0.2;
    setTimeout(()=>{ img.src = slides[si]; img.style.opacity = 1; }, 250);
  }, 2600);

  // --------- GIFTS (uses your photos) ---------
  function openGift(n){
    const modal = document.getElementById('modal');
    const img = document.getElementById('modalImg');
    const text = document.getElementById('modalText');

    if(n===1){
      img.src = IMG_BASE + NAMES.s[1];
      text.innerHTML = "Gift 1 üíå<br>Palak, every time I look at us‚Ä¶ I feel lucky, because I get to love you.";
    } else if(n===2){
      img.src = IMG_BASE + NAMES.s[2];
      text.innerHTML = "Gift 2 üå∏<br>I don‚Äôt want perfect love‚Ä¶ I want real love ‚Äî with you.";
    } else {
      img.src = IMG_BASE + NAMES.s[0];
      text.innerHTML = "Gift 3 üíñ<br>My favourite place is wherever your hand fits in mine.";
    }
    modal.style.display = "flex";
  }
  function closeModal(){ document.getElementById('modal').style.display = "none"; }

  // --------- YES FLOW ---------
  function yesFlow(){
    confettiBurst(160);
    go('gifts');
  }
  function finalBurst(){
    confettiBurst(220);
  }

  // --------- MUSIC (reliable) ---------
  let playing = false;
  async function toggleMusic(){
    const a = document.getElementById("bgm");
    const btn = document.getElementById("musicBtn");
    try{
      if(!playing){
        a.volume = 0.85;
        await a.play();
        playing = true;
        btn.innerHTML = "‚è∏Ô∏è <strong>Pause</strong>";
      }else{
        a.pause();
        playing = false;
        btn.innerHTML = "üé∂ <strong>Play music</strong>";
      }
    }catch(e){
      alert("Music not playing. Check: audio/song.mp3 (must be a real MP3).");
    }
  }
</script>
</body>
</html>
